"use strict";(self.webpackChunkcreate_chart=self.webpackChunkcreate_chart||[]).push([[8046],{52241:function(ne,vt,f){f.d(vt,{Z:function(){return Et}});var jt=f(15009),q=f.n(jt),Mt=f(99289),mt=f.n(Mt),Nt=f(90700),et=f(77598),kt=f(96486),ut=f(67294),rt=f(34104),T=function(D){return{params:D.global.screenData.config.attr.params,filter:D.global.screenData.config.attr.filter,constants:D.global.screenData.config.attr.constants,screenType:D.global.screenType}},Wt=function(D){return{}},ft=f(85893),Q=function(D){var nt=D.params,dt=D.filter,Zt=D.constants,Rt=D.componentFilter,xt=D.componentParams,Ot=xt===void 0?[]:xt,ot=D.componentCondition,It=ot===void 0?{value:[],initialState:"visible"}:ot,pt=D.url,yt=D.reParams,L=yt===void 0?kt.noop:yt,_=D.reFetchData,H=D.reGetValue,N=D.reCondition,M=N===void 0?kt.noop:N,X=D.id,at=It.value,y=at===void 0?[]:at,ht=It.initialState,V=(0,ut.useRef)(new Nt.MI({url:pt,id:X,componentFilter:Rt,componentCondition:y,componentConstants:Zt,componentParams:Ot,onParams:L,onFetch:function(){var A=mt()(q()().mark(function bt(){return q()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",_());case 1:case"end":return K.stop()}},bt)}));function tt(){return A.apply(this,arguments)}return tt}(),onFilter:function(){var A=mt()(q()().mark(function bt(){return q()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",H());case 1:case"end":return K.stop()}},bt)}));function tt(){return A.apply(this,arguments)}return tt}(),onCondition:function(tt){return M(tt,ht)},onHashChange:function(){var tt;(tt=V.current)===null||tt===void 0||tt.compare(nt)}},dt,nt));return(0,et.Z)(function(){var A;(A=V.current)===null||A===void 0||A.compare(nt)},[nt]),(0,ut.useEffect)(function(){y.forEach(function(A){M(A,ht)})},[y,M,ht]),(0,ut.useEffect)(function(){_().then(H)},[]),(0,ft.jsx)(ft.Fragment,{})},Et=(0,rt.connect)(T,Wt)(Q)},99119:function(ne,vt,f){f.r(vt),f.d(vt,{default:function(){return $e}});var jt=f(15009),q=f.n(jt),Mt=f(99289),mt=f.n(Mt),Nt=f(97857),et=f.n(Nt),kt=f(94184),ut=f.n(kt),rt=f(96486),T=f(67294),Wt=f(34104),ft=f(44698),Q=f(52241),Et=f(78166),Ft=f(90700);function D(a,i){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);i&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,e)}return t}function nt(a){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?D(Object(t),!0).forEach(function(e){xt(a,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))})}return a}function dt(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Zt(a,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}function Rt(a,i,t){return i&&Zt(a.prototype,i),t&&Zt(a,t),a}function xt(a,i,t){return i in a?Object.defineProperty(a,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[i]=t,a}function Ot(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&It(a,i)}function ot(a){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ot(a)}function It(a,i){return It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},It(a,i)}function pt(a,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)}function yt(a){var i=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=ot(a);if(i){var n=ot(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pt(this,t)}}var L=function(a,i){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},L(a,i)};function _(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=a}L(a,i),a.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var H=function(){return H=Object.assign||function(a){for(var i,t=1,e=arguments.length;t<e;t++)for(var n in i=arguments[t])Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n]);return a},H.apply(this,arguments)};function N(a,i,t,e){return new(t||(t=Promise))(function(n,r){function s(c){try{h(e.next(c))}catch(l){r(l)}}function o(c){try{h(e.throw(c))}catch(l){r(l)}}function h(c){var l;c.done?n(c.value):(l=c.value,l instanceof t?l:new t(function(u){u(l)})).then(s,o)}h((e=e.apply(a,i||[])).next())})}function M(a,i){var t,e,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function o(h){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(n=2&l[0]?e.return:l[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,l[1])).done)return n;switch(e=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,e=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){s.label=l[1];break}if(l[0]===6&&s.label<n[1]){s.label=n[1],n=l;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(l);break}n[2]&&s.ops.pop(),s.trys.pop();continue}l=i.call(a,s)}catch(u){l=[6,u],e=0}finally{t=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([h,c])}}}function X(a,i){for(var t=0,e=i.length,n=a.length;t<e;t++,n++)a[n]=i[t];return a}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,i){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if(e===0)return!1;for(var n,r,s=0|i,o=Math.max(s>=0?s:e-Math.abs(s),0);o<e;){if((n=t[o])===(r=a)||typeof n=="number"&&typeof r=="number"&&isNaN(n)&&isNaN(r))return!0;o++}return!1}}),String.prototype.includes||(String.prototype.includes=function(a,i){return typeof i!="number"&&(i=0),!(i+a.length>this.length)&&this.indexOf(a,i)!==-1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(this==null)throw new TypeError('"this" is null or not defined');var i=Object(this),t=i.length>>>0;if(typeof a!="function")throw new TypeError("predicate must be a function");for(var e=arguments[1],n=0;n<t;){var r=i[n];if(a.call(e,r,n,i))return r;n++}}});var at=function(a){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return i.some(function(e){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()===e})},y=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},ht=function(a){return[].filter.call(a,function(i){return i!==`
`}).join("")},V=function(a){if(typeof a!="string"||(a=a.toLocaleLowerCase().trim())==="transparent")return!1;var i;return!(/^rgba/.test(a)&&((i=/([^\s,]+)\)$/.exec(a))===null?0:typeof i=="object"?NaN:typeof i=="number"?i:typeof i=="string"?i[i.length-1]==="%"?Number(i.slice(0,-1))/100:Number(i):NaN)===0)},A=function(a,i){var t,e=((t=a.padding)===null||t===void 0?void 0:t.split(" ").map(function(l){return i(l)}))||[0],n=0,r=0,s=0,o=0;switch(e.length){case 1:n=r=s=o=e[0];break;case 2:n=r=e[0],s=o=e[1];break;case 3:n=e[0],s=o=e[1],r=e[2];break;default:n=e[0],r=e[1],s=e[2],o=e[3]}var h={paddingTop:n,paddingBottom:r,paddingLeft:s,paddingRight:o};for(var c in h)h[c]=y(a,c)&&at(a[c],"string","number")?i(a[c]):h[c];return[n,r,s,o]},tt=function(a){var i=[],t=a.map(function(n){return Number(n)}).reduce(function(n,r){if(r>0){var s=n+r;return i.push(s),s}return i.push(NaN),n},0),e=Math.random()*t;return i.findIndex(function(n){return e<=n})},bt=function(a,i,t,e){e===void 0&&(e=1/0),e<=0&&(e=1/0);for(var n="",r=[],s=a.measureText("...").width,o=0;o<i.length;o++){n+=i[o];var h=a.measureText(n).width,c=t(r);if(e===r.length+1&&(h+=s),c<0)return r;if(h>c&&(r.push(n.slice(0,-1)),n=i[o]),e===r.length)return r[r.length-1]+="...",r}return n&&r.push(n),r.length||r.push(i),r},st=function(){function a(){this.subs=[]}return a.prototype.addSub=function(i){this.subs.includes(i)||this.subs.push(i)},a.prototype.notify=function(){this.subs.forEach(function(i){i.update()})},a}(),K="__proto__"in{};function lt(a,i,t,e){Object.defineProperty(a,i,{value:t,enumerable:!!e,writable:!0,configurable:!0})}var Z=Array.prototype,R=Object.create(Z);["push","pop","shift","unshift","sort","splice","reverse"].forEach(function(a){R[a]=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=Z[a].apply(this,i),n=this.__luckyOb__;return["push","unshift","splice"].includes(a)&&n.walk(this),n.dep.notify(),e}});var gt=function(){function a(i){this.dep=new st,lt(i,"__luckyOb__",this),Array.isArray(i)&&(K?i.__proto__=R:Object.getOwnPropertyNames(R).forEach(function(t){lt(i,t,R[t])})),this.walk(i)}return a.prototype.walk=function(i){Object.keys(i).forEach(function(t){Ct(i,t,i[t])})},a}();function it(a){if(a&&typeof a=="object")return"__luckyOb__"in a?a.__luckyOb__:new gt(a)}function Ct(a,i,t){var e=new st,n=Object.getOwnPropertyDescriptor(a,i);if(!n||n.configurable!==!1){var r=n&&n.get,s=n&&n.set;r&&!s||arguments.length!==2||(t=a[i]);var o=it(t);Object.defineProperty(a,i,{get:function(){var h=r?r.call(a):t;return st.target&&(e.addSub(st.target),o&&o.dep.addSub(st.target)),h},set:function(h){h!==t&&(t=h,r&&!s||(s?s.call(a,h):t=h,o=it(h),e.notify()))}})}}var zt=0,Lt=function(){function a(i,t,e,n){n===void 0&&(n={}),this.id=zt++,this.$lucky=i,this.expr=t,this.deep=!!n.deep,this.getter=typeof t=="function"?t:function(r){r+=".";for(var s=[],o="",h=0;h<r.length;h++){var c=r[h];if(/\[|\./.test(c))s.push(o),o="";else{if(/\W/.test(c))continue;o+=c}}return function(l){return s.reduce(function(u,d){return u[d]},l)}}(t),this.cb=e,this.value=this.get()}return a.prototype.get=function(){st.target=this;var i=this.getter.call(this.$lucky,this.$lucky);return this.deep&&function(t){var e=function(n){at(n,"array","object")&&Object.keys(n).forEach(function(r){var s=n[r];e(s)})};e(t)}(i),st.target=null,i},a.prototype.update=function(){var i=this.get(),t=this.value;this.value=i,this.cb.call(this.$lucky,i,t)},a}(),G=function(){function a(i,t){var e=this;this.version="1.7.25",this.htmlFontSize=16,this.rAF=function(){},this.boxWidth=0,this.boxHeight=0,typeof i=="string"?i={el:i}:i.nodeType===1&&(i={el:"",divElement:i}),i=i,this.config=i,this.data=t,i.flag||(i.flag="WEB"),i.el&&(i.divElement=document.querySelector(i.el)),i.divElement&&(i.canvasElement=document.createElement("canvas"),i.divElement.appendChild(i.canvasElement)),i.canvasElement&&(i.ctx=i.canvasElement.getContext("2d"),i.canvasElement.setAttribute("package","lucky-canvas@1.7.25"),i.canvasElement.addEventListener("click",function(n){return e.handleClick(n)})),this.ctx=i.ctx,this.initWindowFunction(),this.config.ctx||console.error("\u65E0\u6CD5\u83B7\u53D6\u5230 CanvasContext2D"),window&&typeof window.addEventListener=="function"&&window.addEventListener("resize",function(n,r){r===void 0&&(r=300);var s=null;return function(){for(var o=this,h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];s||(s=setTimeout(function(){n.apply(o,h),clearTimeout(s),s=null},r))}}(function(){return e.resize()},300)),window&&typeof window.MutationObserver=="function"&&new window.MutationObserver(function(){e.resize()}).observe(document.documentElement,{attributes:!0})}return a.prototype.resize=function(){var i,t;(t=(i=this.config).beforeResize)===null||t===void 0||t.call(i),this.setHTMLFontSize(),this.setDpr(),this.resetWidthAndHeight(),this.zoomCanvas()},a.prototype.initLucky=function(){if(this.resize(),!this.boxWidth||!this.boxHeight)return console.error("\u65E0\u6CD5\u83B7\u53D6\u5230\u5BBD\u5EA6\u6216\u9AD8\u5EA6")},a.prototype.handleClick=function(i){},a.prototype.setHTMLFontSize=function(){window&&(this.htmlFontSize=+window.getComputedStyle(document.documentElement).fontSize.slice(0,-2))},a.prototype.clearCanvas=function(){var i=[this.boxWidth,this.boxHeight],t=i[0],e=i[1];this.ctx.clearRect(-t,-e,2*t,2*e)},a.prototype.setDpr=function(){var i=this.config;i.dpr||(window?window.dpr=i.dpr=window.devicePixelRatio||1:i.dpr||console.error(i,"\u672A\u4F20\u5165 dpr \u53EF\u80FD\u4F1A\u5BFC\u81F4\u7ED8\u5236\u5F02\u5E38"))},a.prototype.resetWidthAndHeight=function(){var i=this.config,t=this.data,e=0,n=0;i.divElement&&(e=i.divElement.offsetWidth,n=i.divElement.offsetHeight),this.boxWidth=this.getLength(t.width||i.width)||e,this.boxHeight=this.getLength(t.height||i.height)||n,i.divElement&&(i.divElement.style.overflow="hidden",i.divElement.style.width=this.boxWidth+"px",i.divElement.style.height=this.boxHeight+"px")},a.prototype.zoomCanvas=function(){var i=this.config,t=this.ctx,e=i.canvasElement,n=i.dpr,r=[this.boxWidth*n,this.boxHeight*n],s=r[0],o=r[1];e&&(e.width=s,e.height=o,e.style.width=s+"px",e.style.height=o+"px",e.style["transform-origin"]="left top",e.style.transform="scale("+1/n+")",t.scale(n,n))},a.prototype.initWindowFunction=function(){var i=this.config;if(window)return this.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},i.setTimeout=window.setTimeout,i.setInterval=window.setInterval,i.clearTimeout=window.clearTimeout,void(i.clearInterval=window.clearInterval);if(i.rAF)this.rAF=i.rAF;else if(i.setTimeout){var t=i.setTimeout;this.rAF=function(e){return t(e,16.7)}}else this.rAF=function(e){return setTimeout(e,16.7)}},a.prototype.isWeb=function(){return["WEB","UNI-H5","TARO-H5"].includes(this.config.flag)},a.prototype.loadImg=function(i,t,e){var n=this;return e===void 0&&(e="$resolve"),new Promise(function(r,s){if(i||s("=> '"+t.src+"' \u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0D\u5408\u6CD5"),n.config.flag!=="WEB")return t[e]=r,void(t.$reject=s);var o=new Image;o.onload=function(){return r(o)},o.onerror=function(){return s("=> '"+t.src+"' \u56FE\u7247\u52A0\u8F7D\u5931\u8D25")},o.src=i})},a.prototype.drawImage=function(i,t){for(var e,n,r,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var h=this.config,c=h.flag,l=h.dpr;if(["WEB","MP-WX"].includes(c))r=t;else{if(!["UNI-H5","UNI-MP","TARO-H5","TARO-MP"].includes(c))return console.error("\u610F\u6599\u4E4B\u5916\u7684 flag, \u8BE5\u5E73\u53F0\u5C1A\u672A\u517C\u5BB9!");r=t.path}var u=(n=(e=r.canvas||r).getContext)===null||n===void 0?void 0:n.call(e,"2d");if(u&&!this.isWeb()){s=s.map(function(C){return C*l});var d=u.getImageData.apply(u,s.slice(0,4));i.putImageData.apply(i,X([d],s.slice(4,6)))}else{s.length===8&&(s=s.map(function(C,g){return g<4?C*l:C}));try{i.drawImage.apply(i,X([r],s))}catch(C){}}},a.prototype.computedWidthAndHeight=function(i,t,e,n){if(!t.width&&!t.height)return[i.width,i.height];if(t.width&&!t.height){var r=this.getLength(t.width,e);return[r,i.height*(r/i.width)]}if(!t.width&&t.height){var s=this.getLength(t.height,n);return[i.width*(s/i.height),s]}return[this.getLength(t.width,e),this.getLength(t.height,n)]},a.prototype.changeUnits=function(i,t){var e=this;t===void 0&&(t=1);var n=this.config;return Number(i.replace(/^([-]*[0-9.]*)([a-z%]*)$/,function(r,s,o){var h={"%":function(l){return l*(t/100)},px:function(l){return 1*l},rem:function(l){return l*e.htmlFontSize},vw:function(l){return l/100*window.innerWidth}}[o];if(h)return h(s);var c=n.handleCssUnit||n.unitFunc;return c?c(s,o):s}))},a.prototype.getLength=function(i,t){return at(i,"number")?i:at(i,"string")?this.changeUnits(i,t):0},a.prototype.getOffsetX=function(i,t){return t===void 0&&(t=0),(t-i)/2},a.prototype.getOffscreenCanvas=function(i,t){if(!y(this,"_offscreenCanvas")&&(window&&window.document&&this.config.flag==="WEB"?this._offscreenCanvas=document.createElement("canvas"):this._offscreenCanvas=this.config.offscreenCanvas,!this._offscreenCanvas))return console.error("\u79BB\u5C4F Canvas \u65E0\u6CD5\u6E32\u67D3!");var e=this.config.dpr,n=this._offscreenCanvas;n.width=(i||300)*e,n.height=(t||150)*e;var r=n.getContext("2d");return r.clearRect(0,0,i,t),r.scale(e,e),r.dpr=e,{_offscreenCanvas:n,_ctx:r}},a.prototype.$set=function(i,t,e){i&&typeof i=="object"&&Ct(i,t,e)},a.prototype.$computed=function(i,t,e){var n=this;Object.defineProperty(i,t,{get:function(){return e.call(n)}})},a.prototype.$watch=function(i,t,e){e===void 0&&(e={}),typeof t=="object"&&(t=(e=t).handler);var n=new Lt(this,i,t,e);return e.immediate&&t.call(this,n.value),function(){}},a.version="1.7.25",a}(),J=function(a){return Math.PI/180*a},U=function(a){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var e=i[0],n=i[1],r=i[2],s=i[3],o=i[4],h=Math.min(r,s),c=Math.PI;o>h/2&&(o=h/2),a.beginPath(),a.moveTo(e+o,n),a.lineTo(e+o,n),a.lineTo(e+r-o,n),a.arc(e+r-o,n+o,o,-c/2,0),a.lineTo(e+r,n+s-o),a.arc(e+r-o,n+s-o,o,0,c/2),a.lineTo(e+o,n+s),a.arc(e+o,n+s-o,o,c/2,c),a.lineTo(e,n+o),a.arc(e+o,n+o,o,c,-c/2),a.closePath()},j=function(a,i,t,e){return a>=e&&(a=e),t*(a/=e)*a+i},wt=function(a,i,t,e){return a>=e&&(a=e),-t*(a/=e)*(a-2)+i},we=function(a){function i(t,e){var n,r=a.call(this,t,{width:e.width,height:e.height})||this;return r.blocks=[],r.prizes=[],r.buttons=[],r.defaultConfig={},r.defaultStyle={},r._defaultConfig={},r._defaultStyle={},r.Radius=0,r.prizeRadius=0,r.prizeDeg=0,r.prizeAng=0,r.rotateDeg=0,r.maxBtnRadius=0,r.startTime=0,r.endTime=0,r.stopDeg=0,r.endDeg=0,r.FPS=16.6,r.step=0,r.ImageCache=new Map,r.initData(e),r.initWatch(),r.initComputed(),(n=t.beforeCreate)===null||n===void 0||n.call(r),r.init(),r}return _(i,a),i.prototype.resize=function(){var t,e;a.prototype.resize.call(this),this.Radius=Math.min(this.boxWidth,this.boxHeight)/2,this.ctx.translate(this.Radius,this.Radius),this.draw(),(e=(t=this.config).afterResize)===null||e===void 0||e.call(t)},i.prototype.initLucky=function(){this.Radius=0,this.prizeRadius=0,this.prizeDeg=0,this.prizeAng=0,this.rotateDeg=0,this.maxBtnRadius=0,this.startTime=0,this.endTime=0,this.stopDeg=0,this.endDeg=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,a.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width),this.$set(this,"height",t.height),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"buttons",t.buttons||[]),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"startCallback",t.start),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){return H({gutter:"0px",offsetDegree:0,speed:20,speedFunction:"quad",accelerationTime:2500,decelerationTime:2500,stopRange:0},t.defaultConfig)}),this.$computed(this,"_defaultStyle",function(){return H({fontSize:"18px",fontColor:"#000",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(e){t.data.width=e,t.resize()}),this.$watch("height",function(e){t.data.height=e,t.resize()}),this.$watch("blocks",function(e){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(e){t.initImageCache()},{deep:!0}),this.$watch("buttons",function(e){t.initImageCache()},{deep:!0}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("startCallback",function(){return t.init()}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,e;return N(this,void 0,void 0,function(){var n;return M(this,function(r){switch(r.label){case 0:return this.initLucky(),n=this.config,(t=n.beforeInit)===null||t===void 0||t.call(this),this.draw(),this.draw(),[4,this.initImageCache()];case 1:return r.sent(),(e=n.afterInit)===null||e===void 0||e.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(e){var n={blocks:t.blocks.map(function(r){return r.imgs}),prizes:t.prizes.map(function(r){return r.imgs}),buttons:t.buttons.map(function(r){return r.imgs})};Object.keys(n).forEach(function(r){var s=n[r],o=[];s&&s.forEach(function(h,c){h&&h.forEach(function(l,u){o.push(t.loadAndCacheImg(r,c,u))})}),Promise.all(o).then(function(){t.draw(),e()})})})},i.prototype.handleClick=function(t){var e,n=this.ctx;n.beginPath(),n.arc(0,0,this.maxBtnRadius,0,2*Math.PI,!1),n.isPointInPath(t.offsetX,t.offsetY)&&this.step===0&&((e=this.startCallback)===null||e===void 0||e.call(this,t))},i.prototype.loadAndCacheImg=function(t,e,n){return N(this,void 0,void 0,function(){var r=this;return M(this,function(s){return[2,new Promise(function(o,h){var c=r[t][e];if(c&&c.imgs){var l=c.imgs[n];l&&r.loadImg(l.src,l).then(function(u){return N(r,void 0,void 0,function(){return M(this,function(d){switch(d.label){case 0:return typeof l.formatter!="function"?[3,2]:[4,Promise.resolve(l.formatter.call(this,u))];case 1:u=d.sent(),d.label=2;case 2:return this.ImageCache.set(l.src,u),o(),[2]}})})}).catch(function(u){console.error(t+"["+e+"].imgs["+n+"] "+u),h()})}})]})})},i.prototype.drawBlock=function(t,e,n){var r=this,s=this.ctx;V(e.background)&&(s.beginPath(),s.fillStyle=e.background,s.arc(0,0,t,0,2*Math.PI,!1),s.fill()),e.imgs&&e.imgs.forEach(function(o,h){var c=r.ImageCache.get(o.src);if(c){var l=r.computedWidthAndHeight(c,o,2*t,2*t),u=l[0],d=l[1],C=[r.getOffsetX(u)+r.getLength(o.left,2*t),r.getLength(o.top,2*t)-t],g=C[0],p=C[1];s.save(),o.rotate&&s.rotate(J(r.rotateDeg)),r.drawImage(s,c,g,p,u,d),s.restore()}})},i.prototype.draw=function(){var t,e,n=this,r=this,s=r.config,o=r.ctx,h=r._defaultConfig,c=r._defaultStyle;(t=s.beforeDraw)===null||t===void 0||t.call(this,o),o.clearRect(-this.Radius,-this.Radius,2*this.Radius,2*this.Radius),this.prizeRadius=this.blocks.reduce(function(g,p,v){return n.drawBlock(g,p,v),g-n.getLength(p.padding&&p.padding.split(" ")[0])},this.Radius),this.prizeDeg=360/this.prizes.length,this.prizeAng=J(this.prizeDeg);var l=this.prizeRadius*Math.sin(this.prizeAng/2)*2,u=J(this.rotateDeg-90+this.prizeDeg/2+h.offsetDegree),d=function(g,p){return n.getOffsetX(o.measureText(p).width)+n.getLength(g.left,l)},C=function(g,p,v){var b=g.lineHeight||c.lineHeight||g.fontSize||c.fontSize;return n.getLength(g.top,p)+(v+1)*n.getLength(b)};o.save(),this.prizes.forEach(function(g,p){var v=u+p*n.prizeAng,b=n.prizeRadius-n.maxBtnRadius,z=g.background||c.background;V(z)&&(o.fillStyle=z,function(w,m,x,P,E,$){w.beginPath();var I,F,B=J(90/Math.PI/x*$),W=P+B,O=E-B;w.arc(0,0,x,W,O,!1),w.lineTo.apply(w,(I=(P+E)/2,F=$/2/Math.abs(Math.sin((P-E)/2)),[+(Math.cos(I)*F).toFixed(8),+(Math.sin(I)*F).toFixed(8)])),w.closePath()}(o,n.maxBtnRadius,n.prizeRadius,v-n.prizeAng/2,v+n.prizeAng/2,n.getLength(h.gutter)),o.fill());var S=Math.cos(v)*n.prizeRadius,k=Math.sin(v)*n.prizeRadius;o.translate(S,k),o.rotate(v+J(90)),g.imgs&&g.imgs.forEach(function(w,m){var x=n.ImageCache.get(w.src);if(x){var P=n.computedWidthAndHeight(x,w,n.prizeAng*n.prizeRadius,b),E=P[0],$=P[1],I=[n.getOffsetX(E)+n.getLength(w.left,l),n.getLength(w.top,b)],F=I[0],B=I[1];n.drawImage(o,x,F,B,E,$)}}),g.fonts&&g.fonts.forEach(function(w){var m=w.fontColor||c.fontColor,x=w.fontWeight||c.fontWeight,P=n.getLength(w.fontSize||c.fontSize),E=w.fontStyle||c.fontStyle,$=y(w,"wordWrap")?w.wordWrap:c.wordWrap,I=w.lengthLimit||c.lengthLimit,F=w.lineClamp||c.lineClamp;o.fillStyle=m,o.font=x+" "+(P>>0)+"px "+E;var B=String(w.text);($?bt(o,ht(B),function(W){var O=(n.prizeRadius-C(w,b,W.length))*Math.tan(n.prizeAng/2)*2-n.getLength(h.gutter);return n.getLength(I,O)},F):B.split(`
`)).filter(function(W){return!!W}).forEach(function(W,O){o.fillText(W,d(w,W),C(w,b,O))})}),o.rotate(J(360)-v-J(90)),o.translate(-S,-k)}),o.restore(),this.buttons.forEach(function(g,p){var v=n.getLength(g.radius,n.prizeRadius);n.maxBtnRadius=Math.max(n.maxBtnRadius,v),V(g.background)&&(o.beginPath(),o.fillStyle=g.background,o.arc(0,0,v,0,2*Math.PI,!1),o.fill()),g.pointer&&V(g.background)&&(o.beginPath(),o.fillStyle=g.background,o.moveTo(-v,0),o.lineTo(v,0),o.lineTo(0,2*-v),o.closePath(),o.fill()),g.imgs&&g.imgs.forEach(function(b,z){var S=n.ImageCache.get(b.src);if(S){var k=n.computedWidthAndHeight(S,b,2*v,2*v),w=k[0],m=k[1],x=[n.getOffsetX(w)+n.getLength(b.left,v),n.getLength(b.top,v)],P=x[0],E=x[1];n.drawImage(o,S,P,E,w,m)}}),g.fonts&&g.fonts.forEach(function(b){var z=b.fontColor||c.fontColor,S=b.fontWeight||c.fontWeight,k=n.getLength(b.fontSize||c.fontSize),w=b.fontStyle||c.fontStyle;o.fillStyle=z,o.font=S+" "+(k>>0)+"px "+w,String(b.text).split(`
`).forEach(function(m,x){o.fillText(m,d(b,m),C(b,v,x))})})}),(e=s.afterDraw)===null||e===void 0||e.call(this,o)},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,e=t._defaultConfig,n=t.prizeFlag,r=t.prizeDeg,s=t.rotateDeg;this.endTime=Date.now();for(var o=this.stopDeg=s,h=e.speed,c=(Math.random()*r-r/2)*this.getLength(e.stopRange),l=0,u=0,d=0;++l;){var C=360*l-n*r-s-e.offsetDegree+c-r/2,g=wt(this.FPS,o,C,e.decelerationTime)-o;if(g>h){this.endDeg=h-u>g-h?C:d;break}d=C,u=g}},i.prototype.play=function(){var t,e;this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,(e=(t=this.config).afterStart)===null||e===void 0||e.call(t),this.run())},i.prototype.stop=function(t){if(this.step!==0&&this.step!==3){if(!t&&t!==0){var e=this.prizes.map(function(n){return n.range});t=tt(e)}t<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=t%this.prizes.length)}},i.prototype.run=function(t){var e;t===void 0&&(t=0);var n=this,r=n.rAF,s=n.step,o=n.prizeFlag,h=n._defaultConfig,c=h.accelerationTime,l=h.decelerationTime,u=h.speed;if(s!==0){if(o!==-1){s!==3||this.endDeg||this.carveOnGunwaleOfAMovingBoat();var d=Date.now()-this.startTime,C=Date.now()-this.endTime,g=this.rotateDeg;if(s===1||d<c){this.FPS=d/t;var p=j(d,0,u,c);p===u&&(this.step=2),g+=p%360}else s===2?(g+=u%360,o!==void 0&&o>=0&&(this.step=3,this.stopDeg=0,this.endDeg=0)):s===3?(g=wt(C,this.stopDeg,this.endDeg,l),C>=l&&(this.step=0)):this.stop(-1);this.rotateDeg=g,this.draw(),r(this.run.bind(this,t+1))}}else(e=this.endCallback)===null||e===void 0||e.call(this,this.prizes.find(function(v,b){return b===o})||{})},i.prototype.conversionAxis=function(t,e){var n=this.config;return[t/n.dpr-this.Radius,e/n.dpr-this.Radius]},i}(G),ye=function(a){function i(t,e){var n,r=a.call(this,t,{width:e.width,height:e.height})||this;return r.rows=3,r.cols=3,r.blocks=[],r.prizes=[],r.buttons=[],r.defaultConfig={},r.defaultStyle={},r.activeStyle={},r._defaultConfig={},r._defaultStyle={},r._activeStyle={},r.cellWidth=0,r.cellHeight=0,r.startTime=0,r.endTime=0,r.currIndex=0,r.stopIndex=0,r.endIndex=0,r.demo=!1,r.timer=0,r.FPS=16.6,r.step=0,r.prizeFlag=-1,r.cells=[],r.ImageCache=new Map,r.initData(e),r.initWatch(),r.initComputed(),(n=t.beforeCreate)===null||n===void 0||n.call(r),r.init(),r}return _(i,a),i.prototype.resize=function(){var t,e;a.prototype.resize.call(this),this.draw(),(e=(t=this.config).afterResize)===null||e===void 0||e.call(t)},i.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.startTime=0,this.endTime=0,this.currIndex=0,this.stopIndex=0,this.endIndex=0,this.demo=!1,this.timer=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,a.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width),this.$set(this,"height",t.height),this.$set(this,"rows",Number(t.rows)||3),this.$set(this,"cols",Number(t.cols)||3),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"buttons",t.buttons||[]),this.$set(this,"button",t.button),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"activeStyle",t.activeStyle||{}),this.$set(this,"startCallback",t.start),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){var e=H({gutter:5,speed:20,accelerationTime:2500,decelerationTime:2500},t.defaultConfig);return e.gutter=t.getLength(e.gutter),e.speed=e.speed/40,e}),this.$computed(this,"_defaultStyle",function(){return H({borderRadius:20,fontColor:"#000",fontSize:"18px",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",shadow:"",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)}),this.$computed(this,"_activeStyle",function(){return H({background:"#ffce98",shadow:""},t.activeStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(e){t.data.width=e,t.resize()}),this.$watch("height",function(e){t.data.height=e,t.resize()}),this.$watch("blocks",function(e){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(e){t.initImageCache()},{deep:!0}),this.$watch("buttons",function(e){t.initImageCache()},{deep:!0}),this.$watch("rows",function(){return t.init()}),this.$watch("cols",function(){return t.init()}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("activeStyle",function(){return t.draw()},{deep:!0}),this.$watch("startCallback",function(){return t.init()}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,e;return N(this,void 0,void 0,function(){var n;return M(this,function(r){switch(r.label){case 0:return this.initLucky(),n=this.config,(t=n.beforeInit)===null||t===void 0||t.call(this),this.draw(),[4,this.initImageCache()];case 1:return r.sent(),(e=n.afterInit)===null||e===void 0||e.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(e){var n=t.buttons.map(function(s){return s.imgs});t.button&&n.push(t.button.imgs);var r={blocks:t.blocks.map(function(s){return s.imgs}),prizes:t.prizes.map(function(s){return s.imgs}),buttons:n};Object.keys(r).forEach(function(s){var o=r[s],h=[];o&&o.forEach(function(c,l){c&&c.forEach(function(u,d){h.push(t.loadAndCacheImg(s,l,d))})}),Promise.all(h).then(function(){t.draw(),e()})})})},i.prototype.handleClick=function(t){var e=this,n=this.ctx;X(X([],this.buttons),[this.button]).forEach(function(r){var s;if(r){var o=e.getGeometricProperty([r.x,r.y,r.col||1,r.row||1]),h=o[0],c=o[1],l=o[2],u=o[3];n.beginPath(),n.rect(h,c,l,u),n.isPointInPath(t.offsetX,t.offsetY)&&e.step===0&&(typeof r.callback=="function"&&r.callback.call(e,r),(s=e.startCallback)===null||s===void 0||s.call(e,t,r))}})},i.prototype.loadAndCacheImg=function(t,e,n){return N(this,void 0,void 0,function(){var r=this;return M(this,function(s){return[2,new Promise(function(o,h){var c=r[t][e];if(t==="buttons"&&!r.buttons.length&&r.button&&(c=r.button),c&&c.imgs){var l=c.imgs[n];if(l){var u=[r.loadImg(l.src,l),l.activeSrc&&r.loadImg(l.activeSrc,l,"$activeResolve")];Promise.all(u).then(function(d){var C=d[0],g=d[1];return N(r,void 0,void 0,function(){var p;return M(this,function(v){switch(v.label){case 0:return typeof(p=l.formatter)!="function"?[3,3]:[4,Promise.resolve(p.call(this,C))];case 1:return C=v.sent(),g?[4,Promise.resolve(p.call(this,g))]:[3,3];case 2:g=v.sent(),v.label=3;case 3:return this.ImageCache.set(l.src,C),g&&this.ImageCache.set(l.activeSrc,g),o(),[2]}})})}).catch(function(d){console.error(t+"["+e+"].imgs["+n+"] "+d),h()})}}})]})})},i.prototype.draw=function(){var t,e,n=this,r=this,s=r.config,o=r.ctx,h=r._defaultConfig,c=r._defaultStyle,l=r._activeStyle;(t=s.beforeDraw)===null||t===void 0||t.call(this,o),o.clearRect(0,0,this.boxWidth,this.boxHeight),this.cells=X(X([],this.prizes),this.buttons),this.button&&this.cells.push(this.button),this.cells.forEach(function(u){u.col=u.col||1,u.row=u.row||1}),this.prizeArea=this.blocks.reduce(function(u,d,C){var g=u.x,p=u.y,v=u.w,b=u.h,z=A(d,n.getLength.bind(n)),S=z[0],k=z[1],w=z[2],m=z[3],x=d.borderRadius?n.getLength(d.borderRadius):0,P=d.background;return V(P)&&(o.fillStyle=n.handleBackground(g,p,v,b,P),U(o,g,p,v,b,x),o.fill()),d.imgs&&d.imgs.forEach(function(E,$){var I=n.ImageCache.get(E.src);if(I){var F=n.computedWidthAndHeight(I,E,v,b),B=F[0],W=F[1],O=[n.getOffsetX(B,v)+n.getLength(E.left,v),n.getLength(E.top,b)],Pt=O[0],Tt=O[1];n.drawImage(o,I,g+Pt,p+Tt,B,W)}}),{x:g+w,y:p+S,w:v-w-m,h:b-S-k}},{x:0,y:0,w:this.boxWidth,h:this.boxHeight}),this.cellWidth=(this.prizeArea.w-h.gutter*(this.cols-1))/this.cols,this.cellHeight=(this.prizeArea.h-h.gutter*(this.rows-1))/this.rows,this.cells.forEach(function(u,d){var C=n.getGeometricProperty([u.x,u.y,u.col,u.row]),g=C[0],p=C[1],v=C[2],b=C[3],z=!1;(n.prizeFlag===void 0||n.prizeFlag>-1)&&(z=d===n.currIndex%n.prizes.length>>0);var S=z?l.background:u.background||c.background;if(V(S)){var k=(z?l.shadow:u.shadow||c.shadow).replace(/px/g,"").split(",")[0].split(" ").map(function(m,x){return x<3?Number(m):m});k.length===4&&(o.shadowColor=k[3],o.shadowOffsetX=k[0]*s.dpr,o.shadowOffsetY=k[1]*s.dpr,o.shadowBlur=k[2],k[0]>0?v-=k[0]:(v+=k[0],g-=k[0]),k[1]>0?b-=k[1]:(b+=k[1],p-=k[1])),o.fillStyle=n.handleBackground(g,p,v,b,S);var w=n.getLength(u.borderRadius?u.borderRadius:c.borderRadius);U(o,g,p,v,b,w),o.fill(),o.shadowColor="rgba(0, 0, 0, 0)",o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowBlur=0}d>=n.prizes.length&&(d-=n.prizes.length),u.imgs&&u.imgs.forEach(function(m,x){var P=n.ImageCache.get(m.src),E=n.ImageCache.get(m.activeSrc);if(P){var $=z&&E||P;if($){var I=n.computedWidthAndHeight($,m,v,b),F=I[0],B=I[1],W=[g+n.getOffsetX(F,v)+n.getLength(m.left,v),p+n.getLength(m.top,b)],O=W[0],Pt=W[1];n.drawImage(o,$,O,Pt,F,B)}}}),u.fonts&&u.fonts.forEach(function(m){var x=z&&l.fontStyle?l.fontStyle:m.fontStyle||c.fontStyle,P=z&&l.fontWeight?l.fontWeight:m.fontWeight||c.fontWeight,E=z&&l.fontSize?n.getLength(l.fontSize):n.getLength(m.fontSize||c.fontSize),$=z&&l.lineHeight?l.lineHeight:m.lineHeight||c.lineHeight||m.fontSize||c.fontSize,I=y(m,"wordWrap")?m.wordWrap:c.wordWrap,F=m.lengthLimit||c.lengthLimit,B=m.lineClamp||c.lineClamp;o.font=P+" "+(E>>0)+"px "+x,o.fillStyle=z&&l.fontColor?l.fontColor:m.fontColor||c.fontColor;var W=[],O=String(m.text);if(I){var Pt=n.getLength(F,v);W=bt(o,ht(O),function(){return Pt},B)}else W=O.split(`
`);W.forEach(function(Tt,qt){o.fillText(Tt,g+n.getOffsetX(o.measureText(Tt).width,v)+n.getLength(m.left,v),p+n.getLength(m.top,b)+(qt+1)*n.getLength($))})})}),(e=s.afterDraw)===null||e===void 0||e.call(this,o)},i.prototype.handleBackground=function(t,e,n,r,s){var o=this.ctx;return s.includes("linear-gradient")&&(s=function(h,c,l,u,d,C){var g=/linear-gradient\((.+)\)/.exec(C)[1].split(",").map(function(S){return S.trim()}),p=g.shift(),v=[0,0,0,0];if(p.includes("deg")){var b=function(S){return Math.tan(S/180*Math.PI)};(p=p.slice(0,-3)%360)>=0&&p<45?v=[c,l+d,c+u,l+d-u*b(p-0)]:p>=45&&p<90?v=[c,l+d,c+u-d*b(p-45),l]:p>=90&&p<135?v=[c+u,l+d,c+u-d*b(p-90),l]:p>=135&&p<180?v=[c+u,l+d,c,l+u*b(p-135)]:p>=180&&p<225?v=[c+u,l,c,l+u*b(p-180)]:p>=225&&p<270?v=[c+u,l,c+d*b(p-225),l+d]:p>=270&&p<315?v=[c,l,c+d*b(p-270),l+d]:p>=315&&p<360&&(v=[c,l,c+u,l+d-u*b(p-315)])}else p.includes("top")?v=[c,l+d,c,l]:p.includes("bottom")?v=[c,l,c,l+d]:p.includes("left")?v=[c+u,l,c,l]:p.includes("right")&&(v=[c,l,c+u,l]);var z=h.createLinearGradient.apply(h,v.map(function(S){return S>>0}));return g.reduce(function(S,k,w){var m=k.split(" ");return m.length===1?S.addColorStop(w,m[0]):m.length===2&&S.addColorStop.apply(S,m),S},z)}(o,t,e,n,r,s)),s},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,e=t._defaultConfig,n=t.prizeFlag,r=t.currIndex;this.endTime=Date.now();for(var s=this.stopIndex=r,o=e.speed,h=0,c=0,l=0;++h;){var u=this.prizes.length*h+n-s,d=wt(this.FPS,s,u,e.decelerationTime)-s;if(d>o){this.endIndex=o-c>d-o?u:l;break}l=u,c=d}},i.prototype.play=function(){var t,e;this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,(e=(t=this.config).afterStart)===null||e===void 0||e.call(t),this.run())},i.prototype.stop=function(t){if(this.step!==0&&this.step!==3){if(!t&&t!==0){var e=this.prizes.map(function(n){return n.range});t=tt(e)}t<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=t%this.prizes.length)}},i.prototype.run=function(t){var e;t===void 0&&(t=0);var n=this,r=n.rAF,s=n.step,o=n.prizes,h=n.prizeFlag,c=n._defaultConfig,l=c.accelerationTime,u=c.decelerationTime,d=c.speed;if(s!==0){if(h!==-1){s!==3||this.endIndex||this.carveOnGunwaleOfAMovingBoat();var C=Date.now()-this.startTime,g=Date.now()-this.endTime,p=this.currIndex;if(s===1||C<l){this.FPS=C/t;var v=j(C,.1,d-.1,l);v===d&&(this.step=2),p+=v%o.length}else s===2?(p+=d%o.length,h!==void 0&&h>=0&&(this.step=3,this.stopIndex=0,this.endIndex=0)):s===3?(p=wt(g,this.stopIndex,this.endIndex,u),g>=u&&(this.step=0)):this.stop(-1);this.currIndex=p,this.draw(),r(this.run.bind(this,t+1))}}else(e=this.endCallback)===null||e===void 0||e.call(this,this.prizes.find(function(b,z){return z===h})||{})},i.prototype.getGeometricProperty=function(t){var e=t[0],n=t[1],r=t[2],s=r===void 0?1:r,o=t[3],h=o===void 0?1:o,c=this.cellWidth,l=this.cellHeight,u=this._defaultConfig.gutter,d=[this.prizeArea.x+(c+u)*e,this.prizeArea.y+(l+u)*n];return s&&h&&d.push(c*s+u*(s-1),l*h+u*(h-1)),d},i.prototype.conversionAxis=function(t,e){var n=this.config;return[t/n.dpr,e/n.dpr]},i}(G),ie=function(a){function i(t,e){var n,r=a.call(this,t,{width:e.width,height:e.height})||this;return r.blocks=[],r.prizes=[],r.slots=[],r.defaultConfig={},r._defaultConfig={},r.defaultStyle={},r._defaultStyle={},r.endCallback=function(){},r.cellWidth=0,r.cellHeight=0,r.cellAndSpacing=0,r.widthAndSpacing=0,r.heightAndSpacing=0,r.FPS=16.6,r.scroll=[],r.stopScroll=[],r.endScroll=[],r.startTime=0,r.endTime=0,r.step=0,r.prizeFlag=void 0,r.ImageCache=new Map,r.initData(e),r.initWatch(),r.initComputed(),(n=t.beforeCreate)===null||n===void 0||n.call(r),r.init(),r}return _(i,a),i.prototype.resize=function(){var t,e;a.prototype.resize.call(this),this.draw(),(e=(t=this.config).afterResize)===null||e===void 0||e.call(t)},i.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.cellAndSpacing=0,this.widthAndSpacing=0,this.heightAndSpacing=0,this.FPS=16.6,this.scroll=[],this.stopScroll=[],this.endScroll=[],this.startTime=0,this.endTime=0,this.prizeFlag=void 0,this.step=0,a.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width),this.$set(this,"height",t.height),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"slots",t.slots||[]),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){var e=H({mode:"vertical",rowSpacing:0,colSpacing:5,speed:20,direction:1,accelerationTime:2500,decelerationTime:2500},t.defaultConfig);return e.rowSpacing=t.getLength(e.rowSpacing),e.colSpacing=t.getLength(e.colSpacing),e}),this.$computed(this,"_defaultStyle",function(){return H({borderRadius:0,fontColor:"#000",fontSize:"18px",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(e){t.data.width=e,t.resize()}),this.$watch("height",function(e){t.data.height=e,t.resize()}),this.$watch("blocks",function(e){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(e){t.initImageCache()},{deep:!0}),this.$watch("slots",function(e){t.drawOffscreenCanvas(),t.draw()},{deep:!0}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,e;return N(this,void 0,void 0,function(){var n;return M(this,function(r){switch(r.label){case 0:return this.initLucky(),n=this.config,(t=n.beforeInit)===null||t===void 0||t.call(this),this.drawOffscreenCanvas(),this.draw(),[4,this.initImageCache()];case 1:return r.sent(),(e=n.afterInit)===null||e===void 0||e.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(e){var n={blocks:t.blocks.map(function(r){return r.imgs}),prizes:t.prizes.map(function(r){return r.imgs})};Object.keys(n).forEach(function(r){var s=n[r],o=[];s&&s.forEach(function(h,c){h&&h.forEach(function(l,u){o.push(t.loadAndCacheImg(r,c,u))})}),Promise.all(o).then(function(){t.drawOffscreenCanvas(),t.draw(),e()})})})},i.prototype.loadAndCacheImg=function(t,e,n){return N(this,void 0,void 0,function(){var r=this;return M(this,function(s){return[2,new Promise(function(o,h){var c=r[t][e];if(c&&c.imgs){var l=c.imgs[n];l&&r.loadImg(l.src,l).then(function(u){return N(r,void 0,void 0,function(){return M(this,function(d){switch(d.label){case 0:return typeof l.formatter!="function"?[3,2]:[4,Promise.resolve(l.formatter.call(this,u))];case 1:u=d.sent(),d.label=2;case 2:return this.ImageCache.set(l.src,u),o(),[2]}})})}).catch(function(u){console.error(t+"["+e+"].imgs["+n+"] "+u),h()})}})]})})},i.prototype.drawOffscreenCanvas=function(){var t=this,e=this._defaultConfig,n=this._defaultStyle,r=this.drawBlocks(),s=r.w,o=r.h,h=this.prizes.length,c=this.displacementWidthOrHeight(),l=c.cellWidth,u=c.cellHeight,d=c.widthAndSpacing,C=c.heightAndSpacing,g=new Array(h).fill(void 0).map(function(k,w){return w}),p=0,v=0;this.slots.forEach(function(k,w){t.scroll[w]===void 0&&(t.scroll[w]=0),k.order=k.order||g;var m=k.order.length;p=Math.max(p,s+d*m),v=Math.max(v,o+C*m)});var b=this.getOffscreenCanvas(p,v),z=b._offscreenCanvas,S=b._ctx;this._offscreenCanvas=z,this.slots.forEach(function(k,w){var m=l*w,x=u*w,P=0,E=function(St,Gt){for(var _t={},Yt=[],ct=0;ct<St.length;ct++)_t[ct]=St[ct];for(ct=0;ct<Gt.length;ct++){var Ht=_t[Gt[ct]];Ht&&(Yt[ct]=Ht)}return Yt}(t.prizes,k.order);if(E.length){E.forEach(function(St,Gt){if(St){k.order[Gt];var _t=d*Gt+e.colSpacing/2,Yt=C*Gt+e.rowSpacing/2,ct=t.displacement([m,Yt,C],[_t,x,d]),Ht=ct[0],oe=ct[1],ae=ct[2];P+=ae;var Ut=St.background||n.background;if(V(Ut)){var se=t.getLength(y(St,"borderRadius")?St.borderRadius:n.borderRadius);U(S,Ht,oe,l,l,se),S.fillStyle=Ut,S.fill()}St.imgs&&St.imgs.forEach(function(Y,fe){var Kt=t.ImageCache.get(Y.src);if(Kt){var Xt=t.computedWidthAndHeight(Kt,Y,l,u),te=Xt[0],le=Xt[1],ee=[Ht+t.getOffsetX(te,l)+t.getLength(Y.left,l),oe+t.getLength(Y.top,u)],ce=ee[0],Qt=ee[1];t.drawImage(S,Kt,ce,Qt,te,le)}}),St.fonts&&St.fonts.forEach(function(Y){var fe=Y.fontStyle||n.fontStyle,Kt=Y.fontWeight||n.fontWeight,Xt=t.getLength(Y.fontSize||n.fontSize),te=Y.lineHeight||n.lineHeight||Y.fontSize||n.fontSize,le=y(Y,"wordWrap")?Y.wordWrap:n.wordWrap,ee=Y.lengthLimit||n.lengthLimit,ce=Y.lineClamp||n.lineClamp;S.font=Kt+" "+(Xt>>0)+"px "+fe,S.fillStyle=Y.fontColor||n.fontColor;var Qt=[],de=String(Y.text);if(le){var pe=t.getLength(ee,l);Qt=bt(S,ht(de),function(){return pe},ce)}else Qt=de.split(`
`);Qt.forEach(function(At,Dt){S.fillText(At,Ht+t.getOffsetX(S.measureText(At).width,l)+t.getLength(Y.left,l),oe+t.getLength(Y.top,u)+(Dt+1)*t.getLength(te))})})}});for(var $=t.displacement([m,0,l,P],[0,x,P,u]),I=$[0],F=$[1],B=$[2],W=$[3],O=P;O<v+P;){var Pt=t.displacement([I,O],[O,F]),Tt=Pt[0],qt=Pt[1];t.drawImage(S,z,I,F,B,W,Tt,qt,B,W),O+=P}}})},i.prototype.drawBlocks=function(){var t=this,e=this;e.config;var n=e.ctx;e._defaultConfig;var r=e._defaultStyle;return this.prizeArea=this.blocks.reduce(function(s,o,h){var c=s.x,l=s.y,u=s.w,d=s.h,C=A(o,t.getLength.bind(t)),g=C[0],p=C[1],v=C[2],b=C[3],z=o.borderRadius?t.getLength(o.borderRadius):0,S=o.background||r.background;return V(S)&&(U(n,c,l,u,d,z),n.fillStyle=S,n.fill()),o.imgs&&o.imgs.forEach(function(k,w){var m=t.ImageCache.get(k.src);if(m){var x=t.computedWidthAndHeight(m,k,u,d),P=x[0],E=x[1],$=[t.getOffsetX(P,u)+t.getLength(k.left,u),t.getLength(k.top,d)],I=$[0],F=$[1];t.drawImage(n,m,c+I,l+F,P,E)}}),{x:c+v,y:l+g,w:u-v-b,h:d-g-p}},{x:0,y:0,w:this.boxWidth,h:this.boxHeight})},i.prototype.draw=function(){var t,e=this,n=this,r=n.config,s=n.ctx;n._defaultConfig,n._defaultStyle,(t=r.beforeDraw)===null||t===void 0||t.call(this,s),s.clearRect(0,0,this.boxWidth,this.boxHeight);var o=this.drawBlocks(),h=o.x,c=o.y,l=o.w,u=o.h;if(this._offscreenCanvas){var d=this,C=d.cellWidth,g=d.cellHeight,p=d.cellAndSpacing,v=d.widthAndSpacing,b=d.heightAndSpacing;this.slots.forEach(function(z,S){var k=p*z.order.length,w=e.displacement(-(u-b)/2,-(l-v)/2),m=e.scroll[S]+w;m<0&&(m=m%k+k),m>k&&(m%=k);var x=e.displacement([C*S,m,C,u],[m,g*S,l,g]),P=x[0],E=x[1],$=x[2],I=x[3],F=e.displacement([h+v*S,c,C,u],[h,c+b*S,l,g]),B=F[0],W=F[1],O=F[2],Pt=F[3];e.drawImage(s,e._offscreenCanvas,P,E,$,I,B,W,O,Pt)})}},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,e=this,n=e._defaultConfig,r=e.prizeFlag,s=e.cellAndSpacing;this.endTime=Date.now(),this.slots.forEach(function(o,h){var c=o.order;if(c.length)for(var l=o.speed||n.speed,u=o.direction||n.direction,d=c.findIndex(function(z){return z===r[h]}),C=s*c.length,g=t.stopScroll[h]=t.scroll[h],p=0;++p;){var v=s*d+C*p*u-g,b=wt(t.FPS,g,v,n.decelerationTime)-g;if(Math.abs(b)>l){t.endScroll[h]=v;break}}})},i.prototype.play=function(){var t,e;this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,(e=(t=this.config).afterStart)===null||e===void 0||e.call(t),this.run())},i.prototype.stop=function(t){var e;if(this.step!==0&&this.step!==3){if(typeof t=="number")this.prizeFlag=new Array(this.slots.length).fill(t);else{if(!at(t,"array"))return this.stop(-1),console.error("stop() \u65E0\u6CD5\u8BC6\u522B\u7684\u53C2\u6570\u7C7B\u578B "+typeof t);if(t.length!==this.slots.length)return this.stop(-1),console.error("stop(["+t+"]) \u53C2\u6570\u957F\u5EA6\u7684\u4E0D\u6B63\u786E");this.prizeFlag=t}!((e=this.prizeFlag)===null||e===void 0)&&e.includes(-1)?(this.prizeFlag=[],this.step=0):this.step=2}},i.prototype.run=function(t){var e,n,r=this;t===void 0&&(t=0);var s=this,o=s.rAF,h=s.step,c=s.prizeFlag,l=s._defaultConfig,u=s.cellAndSpacing,d=s.slots,C=l.accelerationTime,g=l.decelerationTime;if(this.step!==0||(c==null?void 0:c.length)!==d.length){if(c===void 0||c.length){this.step!==3||this.endScroll.length||this.carveOnGunwaleOfAMovingBoat();var p=Date.now()-this.startTime,v=Date.now()-this.endTime;d.forEach(function(w,m){var x=w.order;if(x&&x.length){var P=u*x.length,E=Math.abs(w.speed||l.speed),$=w.direction||l.direction,I=0,F=r.scroll[m];if(h===1||p<C){r.FPS=p/t;var B=j(p,0,E,C);B===E&&(r.step=2),I=(F+B*$)%P}else if(h===2)I=(F+E*$)%P,(c==null?void 0:c.length)===d.length&&(r.step=3,r.stopScroll=[],r.endScroll=[]);else if(h===3&&v){var W=r.stopScroll[m],O=r.endScroll[m];I=wt(v,W,O,g),v>=g&&(r.step=0)}r.scroll[m]=I}}),this.draw(),o(this.run.bind(this,t+1))}}else{for(var b=c[0],z=0;z<d.length;z++){var S=d[z],k=c[z];if(!(!((e=S.order)===null||e===void 0)&&e.includes(k))||b!==k){b=-1;break}}(n=this.endCallback)===null||n===void 0||n.call(this,this.prizes.find(function(w,m){return m===b})||void 0)}},i.prototype.displacement=function(t,e){return this._defaultConfig.mode==="horizontal"?e:t},i.prototype.displacementWidthOrHeight=function(){var t=this._defaultConfig.mode,e=this.slots.length,n=this._defaultConfig,r=n.colSpacing,s=n.rowSpacing,o=this.prizeArea||this.drawBlocks();o.x,o.y;var h,c,l=o.w,u=o.h,d=0,C=0;return t==="horizontal"?(C=this.cellHeight=(u-s*(e-1))/e,d=this.cellWidth=C):(d=this.cellWidth=(l-r*(e-1))/e,C=this.cellHeight=d),h=this.widthAndSpacing=this.cellWidth+r,c=this.heightAndSpacing=this.cellHeight+s,this.cellAndSpacing=t==="horizontal"?h:c,{cellWidth:d,cellHeight:C,widthAndSpacing:h,heightAndSpacing:c}},i}(G),be="@lucky-canvas/react",Se=function(a){Ot(t,T.Component);var i=yt(t);function t(e){var n;return dt(this,t),(n=i.call(this,e)).myLucky=T.createRef(),n.lucky=void 0,n}return Rt(t,[{key:"componentDidMount",value:function(){if(!this.lucky){this.myLucky.current.setAttribute("package","".concat(be,"@").concat("0.1.13"));try{this.initLucky(),this.props.onSuccess&&this.props.onSuccess()}catch(e){this.props.onError&&this.props.onError(e)}finally{this.props.onFinally&&this.props.onFinally()}}}},{key:"componentDidUpdate",value:function(e){this.lucky&&(this.props.width!==e.width&&(this.lucky.width=this.props.width),this.props.height!==e.height&&(this.lucky.height=this.props.height),this.props.blocks!==e.blocks&&(this.lucky.blocks=this.props.blocks),this.props.prizes!==e.prizes&&(this.lucky.prizes=this.props.prizes),this.props.buttons!==e.buttons&&(this.lucky.buttons=this.props.buttons))}},{key:"initLucky",value:function(){var e=this;this.lucky=new we({flag:"WEB",divElement:this.myLucky.current},nt(nt({},this.props),{},{start:function(){var n;e.props.onStart&&(n=e.props).onStart.apply(n,arguments)},end:function(){var n;e.props.onEnd&&(n=e.props).onEnd.apply(n,arguments)}}))}},{key:"init",value:function(){var e;(e=this.lucky).init.apply(e,arguments)}},{key:"play",value:function(){var e;(e=this.lucky).play.apply(e,arguments)}},{key:"stop",value:function(){var e;(e=this.lucky).stop.apply(e,arguments)}},{key:"render",value:function(){return T.createElement("div",{ref:this.myLucky})}}]),t}();Se.defaultProps={width:"",height:"",prizes:[],blocks:[],buttons:[],defaultStyle:{},defaultConfig:{}};var je=function(a){Ot(t,T.Component);var i=yt(t);function t(e){var n;return dt(this,t),(n=i.call(this,e)).myLucky=T.createRef(),n.lucky=void 0,n}return Rt(t,[{key:"componentDidMount",value:function(){if(!this.lucky){this.myLucky.current.setAttribute("package","".concat(be,"@").concat("0.1.13"));try{this.initLucky(),this.props.onSuccess&&this.props.onSuccess()}catch(e){this.props.onError&&this.props.onError(e)}finally{this.props.onFinally&&this.props.onFinally(err)}}}},{key:"componentDidUpdate",value:function(e){this.lucky&&(this.props.width!==e.width&&(this.lucky.width=this.props.width),this.props.height!==e.height&&(this.lucky.height=this.props.height),this.props.cols!==e.cols&&(this.lucky.cols=this.props.cols),this.props.rows!==e.rows&&(this.lucky.rows=this.props.rows),this.props.blocks!==e.blocks&&(this.lucky.blocks=this.props.blocks),this.props.prizes!==e.prizes&&(this.lucky.prizes=this.props.prizes),this.props.buttons!==e.buttons&&(this.lucky.buttons=this.props.buttons))}},{key:"initLucky",value:function(){var e=this;this.lucky=new ye({flag:"WEB",divElement:this.myLucky.current},nt(nt({},this.props),{},{start:function(){var n;e.props.onStart&&(n=e.props).onStart.apply(n,arguments)},end:function(){var n;e.props.onEnd&&(n=e.props).onEnd.apply(n,arguments)}}))}},{key:"init",value:function(){var e;(e=this.$lucky).init.apply(e,arguments)}},{key:"play",value:function(){var e;(e=this.lucky).play.apply(e,arguments)}},{key:"stop",value:function(){var e;(e=this.lucky).stop.apply(e,arguments)}},{key:"render",value:function(){return T.createElement("div",{ref:this.myLucky})}}]),t}();je.defaultProps={width:"",height:"",cols:3,rows:3,blocks:[],prizes:[],buttons:[],defaultStyle:{},activeStyle:{},defaultConfig:{}};var Ee=function(a){Ot(t,T.Component);var i=yt(t);function t(e){var n;return dt(this,t),(n=i.call(this,e)).myLucky=T.createRef(),n.lucky=void 0,n}return Rt(t,[{key:"componentDidMount",value:function(){if(!this.lucky){this.myLucky.current.setAttribute("package","".concat(be,"@").concat("0.1.13"));try{this.initLucky(),this.props.onSuccess&&this.props.onSuccess()}catch(e){this.props.onError&&this.props.onError(e)}finally{this.props.onFinally&&this.props.onFinally(err)}}}},{key:"componentDidUpdate",value:function(e){this.lucky&&(this.props.width!==e.width&&(this.lucky.width=this.props.width),this.props.height!==e.height&&(this.lucky.height=this.props.height),this.props.blocks!==e.blocks&&(this.lucky.blocks=this.props.blocks),this.props.prizes!==e.prizes&&(this.lucky.prizes=this.props.prizes),this.props.slots!==e.slots&&(this.lucky.slots=this.props.slots))}},{key:"initLucky",value:function(){var e=this;this.lucky=new ie({flag:"WEB",divElement:this.myLucky.current},nt(nt({},this.props),{},{start:function(){var n;e.props.onStart&&(n=e.props).onStart.apply(n,arguments)},end:function(){var n;e.props.onEnd&&(n=e.props).onEnd.apply(n,arguments)}}))}},{key:"init",value:function(){var e;(e=this.lucky).init.apply(e,arguments)}},{key:"play",value:function(){var e;(e=this.lucky).play.apply(e,arguments)}},{key:"stop",value:function(){var e;(e=this.lucky).stop.apply(e,arguments)}},{key:"render",value:function(){return T.createElement("div",{ref:this.myLucky})}}]),t}();Ee.defaultProps={width:"",height:"",blocks:[],prizes:[],slots:[],defaultStyle:{},defaultConfig:{}};var ke=f(68945),Jt={"component-other-lucky-draw":"component-other-lucky-draw___eQ39m","component-other-lucky-draw-main":"component-other-lucky-draw-main___W2p9L","component-other-lucky-draw-button-common":"component-other-lucky-draw-button-common___WCrjP","component-other-lucky-draw-button-1":"component-other-lucky-draw-button-1___ISVTb","component-other-lucky-draw-button-2":"component-other-lucky-draw-button-2___w1GmW"},Ce=f(74807),Bt=f(85893),xe=Ce.ZP.themeNameList,he=Ce.ZP.getThemeColorList(xe[0]),ze=Ce.ZP.getThemeColorList(xe[1]),Fe=function(i){var t=i.children,e=i.onClick,n=i.size,r=i.style,s=i.color,o=(0,T.useMemo)(function(){return n*.2},[n]);return(0,Bt.jsx)("div",{className:ut()(Jt["component-other-lucky-draw-button-common"],Jt["component-other-lucky-draw-button-1"]),style:et()(et()({},r),{},{width:o,height:o,"--component-other-lucky-draw-button-color":s,"--component-other-lucky-draw-button-size":o*.2+"px"}),onClick:e,children:t})},Oe=function(i){var t=i.children,e=i.onClick,n=i.size,r=i.style,s=i.color,o=(0,T.useMemo)(function(){return n*.2},[n]);return(0,Bt.jsx)("div",{className:ut()(Jt["component-other-lucky-draw-button-common"],Jt["component-other-lucky-draw-button-2"]),style:et()(et()({},r),{},{width:o,height:o,"--component-other-lucky-draw-button-color":s,"--component-other-lucky-draw-button-size":o*.2+"px"}),onClick:e,children:t})},Ie={custom_1:Fe,custom_2:Oe},Te={custom_1:{value:[{padding:"12px",background:he[0]},{padding:"6px",background:he[1]},{background:he[2]}]},custom_2:{value:[{padding:"12px",background:ze[0]},{padding:"6px",background:ze[1]},{background:he[2]}]}},Ae=18,re=Et.Z.getRgbaString,De=function(i){var t=i.className,e=i.style,n=i.value,r=i.global,s=i.children,o=i.wrapper,h=i.componentBorder,c=h.width,l=h.padding,u=r.screenType,d=n.id,C=n.config,g=C.options,p=C.style,v=p.border,b=p.width,z=p.height,S=g.condition,k=g.global,w=k.style,m=k.config,x=g.buttons,P=g.prizes,E=g.blocks,$=m.stop,I=m.speed,F=(0,T.useRef)((0,rt.uniqueId)(ke.q)),B=(0,T.useRef)(),W=(0,T.useRef)(!1),O=(0,ft.Co)({component:n,global:r}),Pt=O.request,Tt=O.syncInteractiveAction,qt=O.linkageMethod,St=O.getValue,Gt=O.requestUrl,_t=O.componentFilter,Yt=O.value,ct=Yt===void 0?[]:Yt,Ht=O.componentFilterMap,oe=O.onCondition,ae=(0,ft.VB)(".".concat(F.current),{width:b,height:z},[b,z,c,l]),Ut=(0,T.useMemo)(function(){return Math.min(ae.width,ae.height)},[ae]),se=(0,ft.kY)(oe,u),Y=se.onCondition,fe=se.style,Kt=se.className,Xt=(0,T.useMemo)(function(){return Ft.ZP.getFieldMapValue(ct,{map:Ht})},[ct,Ht]),te=(0,T.useMemo)(function(){return ut()(t,Jt["component-other-lucky-draw"],Kt)},[t,Kt]),le=(0,T.useMemo)(function(){var At=100/Xt.length,Dt=P.config,$t=Ut/2-Ae,Vt=.4*$t,ge=.4*$t,ve=Dt.length;return Xt.map(function(me,ue){var Pe=me.img,We=me.title,Re=me.range,Be=ue%ve,Me=Dt[Be].background;return{range:Re||At,background:re(Me),fonts:[et()(et()({text:We,top:"45%"},(0,rt.omit)(w,["background"])),{},{fontStyle:w.fontFamily,fontColor:re(w.color)})],imgs:Pe?[{src:Pe,width:Vt,height:ge,top:"5%"}]:[]}})},[Xt,P,w,Ut]),ee=(0,T.useCallback)(function(){qt("click",{})},[qt]),ce=(0,T.useCallback)(function(){var At,Dt;W.current||((At=B.current)===null||At===void 0||(Dt=At.play)===null||Dt===void 0||Dt.call(At),setTimeout(function(){var $t,Vt;($t=B.current)===null||$t===void 0||(Vt=$t.stop)===null||Vt===void 0||Vt.call($t)},$))},[$]),Qt=(0,T.useCallback)(function(){W.current=!0,Tt("click",{})},[Tt]),de=(0,T.useCallback)(function(){var At=mt()(q()().mark(function Dt($t){var Vt,ge,ve;return q()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:W.current=!1,Vt=$t.fonts,ge=$t.imgs,ve=$t.range,Tt("end",{title:(0,rt.get)(Vt,"0.text"),img:(0,rt.get)(ge,"0.src"),range:ve});case 3:case"end":return ue.stop()}},Dt)}));return function(Dt){return At.apply(this,arguments)}}(),[Tt]),pe=Ie[x.type];return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("div",{className:te,style:(0,rt.merge)(e,fe),id:F.current,onClick:ee,children:(0,Bt.jsxs)(o,{border:v,children:[s,(0,Bt.jsxs)("div",{className:ut()(F.current,"w-100 h-100 pos-ab",Jt["component-other-lucky-draw-main"]),children:[(0,Bt.jsx)(Se,{width:Ut,height:Ut,ref:B,defaultStyle:{wordWrap:!0,lineClamp:1/0,background:re(w.background)},defaultConfig:{speed:I},prizes:le,blocks:Te[E.type].value,onEnd:de,onStart:Qt}),!!pe&&(0,Bt.jsx)(pe,{size:Ut,onClick:ce,color:re(x.color),style:et()(et()({},(0,rt.pick)(x.textStyle,["fontWeight","fontFamily"])),{},{fontSize:x.textStyle.fontSize+"px",color:re(x.textStyle.color)}),children:x.content})]})]})}),(0,Bt.jsx)(Q.Z,{id:d,url:Gt,reFetchData:Pt,reGetValue:St,reCondition:Y,componentFilter:_t,componentCondition:S})]})},Le=De;Le.id=ke.q;var $e=(0,Wt.connect)(function(a){return{componentBorder:(0,rt.get)(a,"global.screenData.config.attr.componentBorder")}},function(){return{}})(Le)},41722:function(ne,vt,f){f.r(vt),f.d(vt,{default:function(){return bt}});var jt=f(19632),q=f.n(jt),Mt=f(97857),mt=f.n(Mt),Nt=f(12444),et=f.n(Nt),kt=f(72004),ut=f.n(kt),rt=f(25098),T=f.n(rt),Wt=f(31996),ft=f.n(Wt),Q=f(26037),Et=f.n(Q),Ft=f(9783),D=f.n(Ft),nt=f(67294),dt=f(45605),Zt=f(96486),Rt=f(37899),xt=f(92618),Ot=f(78166),ot=f(52445),It=f(4494),pt=f(57483),yt=f(32687),L=f(88312),_=f(66960),H=f(12584),N=f(22270),M=f(21478),X=f(74807),at=f(98553),y=f(85893),ht=function(K){var lt=K.value,Z=K.onChange,R=(0,nt.useCallback)(function(gt){Z({config:{options:{condition:gt}}})},[Z]);return(0,y.jsx)(at.Z,{value:lt,onChange:R})},V=ht,A=ot.Z.Item,tt=function(st){ft()(lt,st);var K=Et()(lt);function lt(){var Z;et()(this,lt);for(var R=arguments.length,gt=new Array(R),it=0;it<R;it++)gt[it]=arguments[it];return Z=K.call.apply(K,[this].concat(gt)),D()(T()(Z),"onKeyChange",function(Ct,zt){Z.props.onChange({config:{options:D()({},Ct,zt)}})}),Z}return ut()(lt,[{key:"render",value:function(){var R=this,gt=this.props.value,it=gt.config.options,Ct=it.global,zt=it.buttons,Lt=it.prizes,G=it.blocks,J=it.condition;return(0,y.jsx)(xt.Z,{items:[{label:(0,y.jsx)(xt.O,{children:"\u5168\u5C40\u6837\u5F0F"}),children:(0,y.jsxs)(ot.Z,{level:1,children:[(0,y.jsx)(A,{label:"\u80CC\u666F\u8272",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(Ot.D,{value:Ct.style.background,onChange:function(j){R.onKeyChange("global",{style:{background:j}})}})})}),(0,y.jsx)(A,{label:"\u65CB\u8F6C\u901F\u5EA6",placeholder:(0,y.jsx)(H.Z,{title:"\u5EFA\u8BAE\u914D\u7F6E\u8303\u56F4 10 ~ 30",children:(0,y.jsx)(dt.Z,{})}),children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(_.Z,{value:Ct.config.speed,onChange:function(j){R.onKeyChange("global",{config:{speed:j}})}})})}),(0,y.jsx)(A,{label:"\u62BD\u5956\u65F6\u95F4",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(_.Z,{value:Ct.config.stop,onChange:function(j){R.onKeyChange("global",{config:{stop:j}})}})})}),(0,y.jsx)(It.u,{child:{header:"\u6587\u672C",key:"textStyle"},children:(0,y.jsx)(yt.g,{value:Ct.style,onChange:function(j){R.onKeyChange("global",{style:mt()({},j)})}})})]}),key:"1"},{label:(0,y.jsx)(xt.O,{children:"\u6309\u94AE"}),children:(0,y.jsxs)(ot.Z,{level:1,children:[(0,y.jsx)(A,{label:"\u7C7B\u578B",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(Rt.Z,{className:"w-100",value:zt.type,onChange:function(j){R.onKeyChange("buttons",{type:j})},options:[{label:"\u6837\u5F0F\u4E00",value:"custom_1"},{label:"\u6837\u5F0F\u4E8C",value:"custom_2"}]})})}),(0,y.jsx)(A,{label:"\u989C\u8272",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(Ot.D,{value:zt.color,onChange:function(j){R.onKeyChange("buttons",{color:j})}})})}),(0,y.jsx)(A,{label:"\u6587\u6848",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(N.Z,{value:zt.content,onChange:function(j){R.onKeyChange("buttons",{content:j})}})})}),(0,y.jsx)(It.u,{child:{header:"\u6587\u672C",key:"textStyle"},children:(0,y.jsx)(yt.g,{value:zt.textStyle,onChange:function(j){R.onKeyChange("buttons",{textStyle:mt()({},j)})}})})]}),key:"2"},{label:(0,y.jsx)(xt.O,{children:"\u80CC\u666F"}),children:(0,y.jsx)(ot.Z,{level:1,children:(0,y.jsx)(A,{label:"\u7C7B\u578B",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(Rt.Z,{className:"w-100",value:G.type,onChange:function(j){R.onKeyChange("blocks",{type:j})},options:[{label:"\u6837\u5F0F\u4E00",value:"custom_1"},{label:"\u6837\u5F0F\u4E8C",value:"custom_2"}]})})})}),key:"3"},{label:(0,y.jsx)(xt.O,{children:"\u5956\u54C1"}),children:(0,y.jsx)(ot.Z,{level:1,children:(0,y.jsx)(L.Z,{onAdd:function(){var j={background:X.ZP.generateNextColor4CurrentTheme(Lt.config.length)},wt=[].concat(q()(Lt.config),[j]);R.onKeyChange("prizes",{config:wt})},onRemove:function(j){var wt=q()(Lt.config);wt.splice(j,1),R.onKeyChange("prizes",{config:wt})},counter:Lt.config.length,max:M.Z.getChartSeriesCounter("LUCKY_DRAW"),renderContent:function(j){var wt=Lt.config[j].background;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(A,{label:"\u80CC\u666F\u8272",children:(0,y.jsx)(pt.Z,{children:(0,y.jsx)(Ot.D,{value:wt,onChange:function(ye){var ie=q()(Lt.config);ie.splice(j,1,(0,Zt.merge)(ie[j],{background:ye})),R.onKeyChange("prizes",{config:ie})}})})})})},buttonLabel:"\u65B0\u589E\u5956\u54C1",seriesLabel:function(j){return"\u5956\u54C1".concat(j+1)}})}),key:"4"},{label:(0,y.jsx)(xt.O,{children:"\u6761\u4EF6"}),children:(0,y.jsx)(ot.Z,{level:1,children:(0,y.jsx)(V,{value:J,onChange:this.onKeyChange.bind(null,"condition")})}),key:"5"}]})}}]),lt}(nt.Component),bt=tt},19569:function(ne,vt,f){var jt=f(30565);vt.Z=(0,jt.Z)(function(){return f.e(2339).then(f.bind(f,54448))})},80:function(ne,vt,f){f.d(vt,{Z:function(){return ft}});var jt=f(97857),q=f.n(jt),Mt=f(13769),mt=f.n(Mt),Nt=f(71577),et=f(94184),kt=f.n(et),ut={"design-config-ghost-btn":"design-config-ghost-btn___aFLrM"},rt=f(85893),T=["className"],Wt=function(Et){var Ft=Et.className,D=mt()(Et,T);return(0,rt.jsx)(Nt.Z,q()({type:"primary",ghost:!0,className:kt()(ut["design-config-ghost-btn"],Ft)},D))},ft=Wt},11057:function(ne,vt,f){f.d(vt,{v:function(){return It},Z:function(){return pt}});var jt=f(97857),q=f.n(jt),Mt=f(5574),mt=f.n(Mt),Nt=f(13769),et=f.n(Nt),kt=f(37899),ut=f(18081),rt=f(32808),T=f(94184),Wt=f.n(T),ft=f(96486),Q=f(67294),Et=f(34104),Ft=function(L){var _=L.global.screenData.config.attr,H=_.constants,N=_.params;return{params:N,constants:H}},D=function(L){return{}},nt={"params-select-checkbox":"params-select-checkbox___akkRi"},dt=f(85893),Zt=["params","constants","value","onChange","onBlur","needChangeLazy","changeLazy","style","onChangeLazyChange","wrapperClassName","wrapperStyle"],Rt=["params","constants","value","onChange","onBlur","needChangeLazy","changeLazy","onChangeLazyChange","style","wrapperClassName","wrapperStyle"],xt=kt.Z.Option,Ot=function(L){var _=L.params,H=L.constants,N=L.value,M=L.onChange,X=L.onBlur,at=L.needChangeLazy,y=at===void 0?!1:at,ht=L.changeLazy,V=L.style,A=L.onChangeLazyChange,tt=L.wrapperClassName,bt=L.wrapperStyle,st=et()(L,Zt),K=(0,Q.useState)(N),lt=mt()(K,2),Z=lt[0],R=lt[1],gt=(0,Q.useMemo)(function(){return ut.Z.getAllGlobalParams4Array(_,H)},[_,H]),it=(0,Q.useMemo)(function(){return gt.map(function(G){var J=G.key,U=G.id;return{label:J,value:U}})},[gt]),Ct=(0,Q.useCallback)(function(G){(0,ft.isEqual)(N,Z)||M==null||M(Z),X==null||X(G)},[M,Z,X,N]),zt=(0,Q.useCallback)(function(G){R(G)},[]),Lt=(0,Q.useMemo)(function(){return y?(0,dt.jsx)(rt.Z,{checked:ht,onChange:function(J){return A==null?void 0:A(J.target.checked)},className:nt["params-select-checkbox"],style:{marginLeft:8},children:"\u61D2\u66F4\u65B0"}):null},[y,ht,A]);return(0,dt.jsxs)("div",{className:Wt()("dis-flex flex-al-cen",tt),style:bt,children:[(0,dt.jsx)(kt.Z,q()(q()({mode:"tags",allowClear:!0,style:(0,ft.merge)(V,{width:y?"calc(100% - 80px)":"100%"}),placeholder:"\u9009\u62E9\u5168\u5C40\u53C2\u6570",value:Z,onChange:zt,onBlur:Ct},st),{},{options:it})),Lt]})},ot=function(L){var _=L.params,H=L.constants,N=L.value,M=L.onChange,X=L.onBlur,at=L.needChangeLazy,y=at===void 0?!1:at,ht=L.changeLazy,V=L.onChangeLazyChange,A=L.style,tt=L.wrapperClassName,bt=L.wrapperStyle,st=et()(L,Rt),K=(0,Q.useState)(N),lt=mt()(K,2),Z=lt[0],R=lt[1],gt=(0,Q.useMemo)(function(){return ut.Z.getAllGlobalParams4Array(_,H)},[_,H]),it=(0,Q.useMemo)(function(){return gt.map(function(G){var J=G.key,U=G.value,j=G.id;return{label:J,value:j}})},[gt]),Ct=(0,Q.useCallback)(function(G){Z!==N&&(M==null||M(Z)),X==null||X(G)},[M,Z,X,N]),zt=(0,Q.useCallback)(function(G){var J=G.slice(-1),U=mt()(J,1),j=U[0];R(j||"")},[]),Lt=(0,Q.useMemo)(function(){return y?(0,dt.jsx)(rt.Z,{checked:ht,onChange:function(J){return V==null?void 0:V(J.target.checked)},className:nt["params-select-checkbox"],style:{marginLeft:8},children:"\u61D2\u66F4\u65B0"}):null},[y,ht,V]);return(0,dt.jsxs)("div",{className:Wt()("dis-flex flex-al-cen",tt),style:bt,children:[(0,dt.jsx)(kt.Z,q()(q()({mode:"tags",allowClear:!0,style:(0,ft.merge)(A,{width:y?"calc(100% - 80px)":"100%"}),placeholder:"\u9009\u62E9\u5168\u5C40\u53C2\u6570",value:Z?[Z]:[],onChange:zt,onBlur:Ct},st),{},{options:it})),Lt]})},It=(0,Et.connect)(Ft,D)(ot),pt=(0,Et.connect)(Ft,D)(Ot)}}]);
